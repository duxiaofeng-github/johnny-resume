<div class="container container-2 code">
  <h1 class="page-title">我的项目</h1>

  <div class="content-scrollable">
    <div class="code-time-line">
      <div class="block">
        <h2>七牛开发者平台V2</h2>
        <div class="content">
          <p>这个项目是入职七牛的时候，最初的一个管理平台。入职之后，我引入了grunt、less以及coffeescript，来解决构建及原生的css及js的各种不便。之后又用gulp替代grunt。后端用的revel，模板由后端渲染。</p>
          <p>随着业务发展，功能复杂度增加，这个项目逐渐失控。主要问题在于js的模块化，依赖问题，以及后端数据和前端展示逻辑的耦合。</p>
          <p>jquery对DOM结构的直接频繁的操作，又没有很好的代码规范约束，导致可读性及可维护性直线下降。</p>
          <p>以上的各种问题，实际上也是近几年Web端发展所遇到问题的一个栗子。</p>
        </div>
      </div>

      <div class="block">
        <h2><a target="_blank" href="https://evm.qiniu.com">七牛虚拟机管理平台</a></h2>
        <div class="content">
          <p>维护开发平台V2版本一年左右之后，重组另一个项目组，负责开发七牛的虚拟机平台。</p>
          <p>我的职责是前端架构，项目管理。接收需求，安排功能的开发时间点。当然，四个人一个team，我要做一些开发的工作。</p>
          <p>为了解决V2版本遇到的问题，所以引入angular。这个框架很好的解决了模块化的问题，mvc之间的职责相对分明，代码的可读性和可维护性大大提高了。同时angular解决了另一些问题，例如数据绑定、依赖注入、路由、以及xss。</p>
          <p>前端和后端的数据通信，使用restful的api，json格式，基本满足需求，达到剥离数据和前端展示逻辑的问题，后端变成一个数据源。</p>
        </div>
      </div>

      <div class="block">
        <h2>七牛开发者平台V3</h2>
        <div class="content">
          <p>维护虚拟机平台半年之后，进入另一个项目组，开发新版的开发者平台。</p>
          <p>目标是集成七牛的几个子产品平台，以及官网，文档站等。</p>
          <p>前端同样是angular，less+coffeescript，gulp+bower+npm。后端使用内部开发的一个go注入式框架，写代码只需要关注输入输出，数据表结构，以及业务逻辑，效率再次提升很多。</p>
          <p>主站和子站之间使用oauth授权，公用顶栏使用iframe嵌入。实践表明，这种方案可以实现基本功能，但体验太差。想象下子站之间不停跳转loading就知道了。</p>
        </div>
      </div>

      <div class="block">
        <h2><a target="_blank" href="https://portal.qiniu.com">七牛开发者平台V4</a></h2>
        <div class="content">
          <p>作为一个不折腾会死星人，我们又开始折腾开发者平台的V4版本。</p>
          <p>目标同样是集成子产品。</p>
          <p>和V3不同的是，V4只有一个站点，将子产品当成功能模块，代码也在一个库中维护。</p>
          <p>实践结果是，在一个站点内操作，体验好了很多。但后续可能还有问题，随着产品的增加，团队的拆分，拆库是必然的。有可能还会拆分子站，所以最后可能还要上根cookie来共享各种状态。</p>
          <p>这个架构也并非完美，angular本身也有诸多问题，例如对于第三方插件的不友好（因为angular是不推荐直接操作dom的，所以必须在他的规范下玩耍），以及seo的不友好（prerender作为一个解决方案，也不是很nice）。coffee这个语法糖，也没有解决原生js的问题，例如一些现代语言的特性（interface、具名参数等）。</p>
          <p>基于以上的问题，可能会尝试react+typescript/es2015。</p>
        </div>
      </div>

      <div class="block">
        <h2>七牛其他项目</h2>
        <div class="content">
          <p>维护账号及钱包系统，包含注册、登录、账户设置、账单、充值、消费流水、发票等。</p>
          <p>消息服务，发送各类客户通知，通过邮件、短信、站内信等渠道。</p>
          <p>内部运营平台，<a target="_blank" href="https://admin.qiniu.com">admin.qiniu.com</a> 及 <a target="_blank" href="https://portal.qiniu.io">portal.qiniu.io</a>。</p>
        </div>
      </div>

      <div class="block">
        <h2><a target="_blank" href="http://bangmang.in">帮个忙</a></h2>
        <div class="content">
          <p>这个项目是一个纯静态的产品官网，是一个业余项目。</p>
          <p>用到的东西不多，玩了下视差交互，html5的video，svg，还有css3的3d transform。</p>
          <p>当然，对古代的浏览器不友好。</p>
        </div>
      </div>

      <div class="block">
        <h2>优爱创</h2>
        <div class="content">
          <p>另一个业余项目，一个设计外包平台。</p>
          <p>功能包含官网（作品、设计师、需求方的展示），管理后台（注册登录、需求发布、作品管理、身份认证、支付、订单、通知等）。</p>
          <p>这个项目第一次引入docker，好处太多。对开发环境的统一，对测试数据的统一，对构建、测试环境的统一，对服务之间的依赖，对部署的快捷和可扩展性，都有诸多好处。</p>
          <p>服务都实现docker化之后，本地开发只需要一个docker-compose up，就能启动所有的依赖服务，并且关系明确。集成测试也只需每次启动一组容器，并且灌入准备好的数据，测试完成后销毁，避免数据污染以及资源浪费。线上环境更不必说，横向扩展的代价非常小，增减容器都十分方便。再使用daocloud的服务，把服务器维护扔出去，写完代码终于能睡个好觉了。</p>
        </div>
      </div>
    </div>

  </div>
</div>